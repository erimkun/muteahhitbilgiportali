# MuteahhitHub - Production Environment Variables
# This file contains production-ready configuration
# SECURITY: Keep this file secure and never commit to version control!

############################
# PRODUCTION CONFIGURATION #
############################

# Server Configuration
NODE_ENV=production
PORT=3001

# Database Configuration
DBSOURCE=./db.sqlite
UPLOADS_DIR=./uploads

# Session / Cookie Security
# CRITICAL: Generate a new strong secret for production!
# Use: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
SESSION_SECRET=CHANGE_THIS_TO_A_STRONG_RANDOM_SECRET_64_CHARS_MINIMUM
SESSION_NAME=mthub_session
SESSION_MAX_AGE=14400000                    # 4 hours
SESSION_SAMESITE=strict                     # strict for better security
TRUST_PROXY=true                           # Enable if behind nginx/proxy
COOKIE_DOMAIN=muteahhitbilgiportali.com    # Production domain

# CORS Configuration
# Frontend domain for CORS
CORS_ORIGIN=https://muteahhitbilgiportali.com

# HTTPS & Security
FORCE_HTTPS=true                           # Force HTTPS redirects
HTTPS_ENABLED=false                        # Set true if Node terminates TLS
# Only needed if Node.js terminates TLS (usually nginx handles this)
#TLS_KEY_PATH=/etc/ssl/private/your-key.pem
#TLS_CERT_PATH=/etc/ssl/certs/your-cert.pem

# Rate Limiting (Production tuned)
RATE_LIMIT_WINDOW=900000                   # 15 minutes
RATE_LIMIT_MAX=100                         # 100 requests per 15 min per IP

# Content Security Policy
ALLOW_CSP_UNSAFE_INLINE=false              # Strict CSP for production

# API Base URL
API_BASE_URL=https://muteahhitbilgiportali.com/api

# Admin Configuration
# CRITICAL: Change these credentials immediately after first deployment!
ADMIN_PHONE=05326225500                    # Change this phone number
ADMIN_PASSWORD=CHANGE_THIS_PASSWORD        # Change this password!

# SMS API Configuration - Production
# CRITICAL: Use production SMS credentials!
SMS_API_USERNAME=your_production_sms_username
SMS_API_PASSWORD=your_production_sms_password
SMS_API_URL=https://your-production-sms-api.com/send
SMS_TEST_MODE=false                        # MUST be false in production!

# SMS Message Template
SMS_MESSAGE_TEMPLATE=Müteahhit Bilgi Portalına hoşgeldiniz. Giriş kodunuz {code} girerek sisteme erişebilirsiniz.

# SMS Security & Rate Limiting
SMS_OTP_TTL=300000                         # 5 minutes OTP validity
SMS_RATE_LIMIT_WINDOW=900000               # 15 minutes
SMS_RATE_LIMIT_MAX=3                       # Max 3 OTP requests per window
SMS_COOLDOWN_MS=60000                      # 1 minute between requests
SMS_RESEND_COOLDOWN_MS=120000              # 2 minutes between resends
SMS_MAX_FAILED_ATTEMPTS=3                  # Max failed attempts before lockout
SMS_LOCKOUT_DURATION=1800000               # 30 minutes lockout

############################
# PRODUCTION CHECKLIST     #
############################
# Before deploying, ensure you've updated:
# ✅ SESSION_SECRET - Generate new random secret
# ✅ COOKIE_DOMAIN - Set to your domain
# ✅ CORS_ORIGIN - Set to your frontend URL
# ✅ API_BASE_URL - Set to your API URL
# ✅ ADMIN_PHONE - Change default phone
# ✅ ADMIN_PASSWORD - Change default password
# ✅ SMS_API_USERNAME - Production SMS credentials
# ✅ SMS_API_PASSWORD - Production SMS credentials
# ✅ SMS_API_URL - Production SMS API endpoint
# ✅ SMS_TEST_MODE - Set to false

############################
# SECURITY NOTES           #
############################
# 1. Never commit this file to version control
# 2. Restrict file permissions: chmod 600 .env
# 3. Use environment variables in deployment platform when possible
# 4. Regularly rotate SESSION_SECRET and SMS credentials
# 5. Monitor for unauthorized access attempts
# 6. Keep backups of working configuration (securely)

############################
# EXAMPLE DOMAINS          #
############################
# Replace these example values with your actual domains:
# COOKIE_DOMAIN=muteahhitportal.com
# CORS_ORIGIN=https://muteahhitportal.com
# API_BASE_URL=https://api.muteahhitportal.com