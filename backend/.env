# MuteahhitHub - Environment variables
# This file is for local development. It also includes a commented production
# template below so you can copy/uncomment values when deploying.

############################
# Development (ACTIVE)     #
############################
# Local dev server port
PORT=3001
NODE_ENV=development

# Database (the code uses DBSOURCE)
DBSOURCE=db.sqlite

# Uploads directory used by app/tests (relative to backend/)
UPLOADS_DIR=uploads

# Sessions / Cookies (do NOT commit production secrets)
SESSION_SECRET=A603C8C70C6D5F45454B4636D255C37CB639B8548CF13E545BDB074FA2993796
SESSION_NAME=mthub_session
SESSION_MAX_AGE=14400000
SESSION_SAMESITE=lax
TRUST_PROXY=false

# CORS - frontend dev (Vite default port)
CORS_ORIGIN=http://localhost:5173

# Rate limiting (kept for reference; config/env.js may override)
RATE_LIMIT_WINDOW=60000
RATE_LIMIT_MAX=5

# Base URL used in docs or local builds
API_BASE_URL=http://localhost:3001

# Optional local admin seed (for convenience only)
ADMIN_PHONE=05326225500
ADMIN_PASSWORD=admin123

# SMS API Configuration
SMS_API_USERNAME=kentas_o
SMS_API_PASSWORD="&i0Vk6#J"
SMS_API_URL=https://webservice.uskudar.bel.tr/smsapi/api/messages/sendotp
SMS_TEST_MODE=true

# SMS Settings
SMS_OTP_TTL=300000             # 5 minutes OTP validity
SMS_MESSAGE_TEMPLATE=Müteahhit Bilgi Portalına hoşgeldiniz. Giriş kodunuz {code} girerek sisteme erişebilirsiniz.

# SMS Rate Limiting & Security
SMS_RATE_LIMIT_WINDOW=900000    # 15 minutes
SMS_RATE_LIMIT_MAX=3           # Max OTP requests per window
SMS_COOLDOWN_MS=60000          # 1 minute between requests
SMS_RESEND_COOLDOWN_MS=120000  # 2 minutes between resends
SMS_MAX_FAILED_ATTEMPTS=3      # Max failed OTP attempts before lockout
SMS_LOCKOUT_DURATION=1800000   # 30 minutes lockout after max failures

############################
# Production (TEMPLATE - COMMENTED)
# When you deploy to production, copy the section below to a secure
# `.env` (not in VCS), replace placeholders and remove the leading `#`.
############################
#NODE_ENV=production
#PORT=3001
#
#DBSOURCE=./db.sqlite
#UPLOADS_DIR=./uploads
#
## Session / Cookie
#SESSION_SECRET=A603C8C70C6D5F45454B4636D255C37CB639B8548CF13E545BDB074FA2993796
#SESSION_NAME=mthub_session
#SESSION_MAX_AGE=14400000
#SESSION_SAMESITE=lax
#TRUST_PROXY=true
#COOKIE_DOMAIN=muteahhitbilgiportali.onrender.com
#
## CORS - set to your front-end domain
#CORS_ORIGIN=https://muteahhitbilgiportali.onrender.com
#
## Force HTTPS and TLS (if terminating TLS in Node)
#FORCE_HTTPS=true
#HTTPS_ENABLED=false
## TLS paths are only required if you terminate TLS inside Node
##TLS_KEY_PATH=/etc/ssl/private/your-key.pem
##TLS_CERT_PATH=/etc/ssl/certs/your-cert.pem
#
## Rate limiting (tune for production)
#RATE_LIMIT_WINDOW=900000
#RATE_LIMIT_MAX=100
#
## Optional monitoring / admin seed (do NOT put real secrets here)
#ADMIN_PHONE=05326225500
#ADMIN_PASSWORD=admin123